---
title: '[LuoguP2794]'
date: 2019-08-10 16:14:57
tags:
---

先拆第一个绝对值，发现只与$a_i-b_i$有关

所以我们首先需要把每个人按$a_i-b_i$排序

<!-- more -->

假设当前考虑的人为$(x,y)$

*   对于所有$a_i-b_i\leq x-y$的人
    *   如果$a_i\leq x$，则答案为$2x-y-2a_i+b_i$，因为$2x-y$不变且答案一定为正，所以只需要维护$-2a_i+b_i$最小
    *   答案为$b_i-y$，同理维护$b_i$最大
*   这个是反的...

这道题转化为求满足$A_i<A_j,B_i<B_j$的$C_{ij}$和反过来再求一次的最小值

所以这是cdq分治模板题... 

其实也可以用树状数组套权值线段树，树状数组存按$a_i-b_i$排序后的点，每个点开一棵权值线段树，权值是$x_i$，另外每棵权值线段树存一下从$1\rightarrow i$拆出来式子中最小需要维护的值
